<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ì—ì½” í€´ì¦ˆ â€” 10ë¬¸ì œ</title>
  <style>
    :root{
      --bg:#f0fbf6;
      --card:#ffffff;
      --accent:#2b9a78;
      --accent-2:#0b6b4a;
      --muted:#6b6b6b;
      --correct:#28a745;
      --wrong:#dc3545;
      --glass: rgba(255,255,255,0.7);
      font-family: "Apple SD Gothic Neo","Noto Sans KR",Segoe UI,Roboto,Arial,sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: linear-gradient(180deg, var(--bg), #e8f7ef);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      color:#0e2d26;
    }

    .wrap{
      width:100%;
      max-width:820px;
      background:var(--card);
      border-radius:14px;
      box-shadow:0 8px 30px rgba(15,40,30,0.12);
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }

    header{
      padding:18px 22px;
      border-bottom:1px solid #eef6f2;
      display:flex;
      align-items:center;
      gap:12px;
    }
    header h1{margin:0;font-size:18px}
    .meta{margin-left:auto;text-align:right;font-size:13px;color:var(--muted)}
    .progress{
      height:8px;
      background:linear-gradient(90deg, rgba(11,107,74,0.12), rgba(43,154,120,0.08));
      border-radius:8px;
      margin:12px 22px;
      overflow:hidden;
    }
    .progress > i{
      display:block;height:100%;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      width:0%;
      transition:width .45s ease;
    }

    main{
      padding:28px 22px;
      display:flex;
      gap:22px;
      align-items:flex-start;
      flex-wrap:wrap;
    }

    .card-left{
      flex:1 1 420px;
      min-width:260px;
    }
    .qbox{
      background:var(--glass);
      border-radius:10px;
      padding:18px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    }
    .qnum{font-size:13px;color:var(--muted);margin-bottom:8px}
    .question{font-size:20px;line-height:1.35;margin:6px 0 12px}
    .choices{display:grid;gap:10px}
    .choice{
      border-radius:10px;
      padding:12px 14px;
      background:white;
      border:1px solid #e6f0ec;
      cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease;
      user-select:none;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .choice:hover{transform:translateY(-3px);box-shadow:0 6px 18px rgba(8,30,20,0.06);}
    .choice input{display:none}
    .choice .label{font-size:15px}
    .choice.correct{border-color:var(--correct);background:linear-gradient(90deg, rgba(40,167,69,0.06), rgba(40,167,69,0.02))}
    .choice.wrong{border-color:var(--wrong);background:linear-gradient(90deg, rgba(220,53,69,0.06), rgba(220,53,69,0.02))}
    .hint{margin-top:10px;font-size:13px;color:var(--muted);display:none}

    .card-right{
      width:240px;
      min-width:220px;
      padding-top:6px;
    }
    .scorecard{
      background:#fbfffd;
      border-radius:10px;
      padding:14px;
      border:1px solid #eaf6ef;
    }
    .score{font-size:34px;margin:6px 0}
    .small{font-size:13px;color:var(--muted)}
    .controls{
      display:flex;
      gap:10px;
      margin-top:14px;
    }
    button{
      background:var(--accent);
      border:none;
      color:white;
      padding:10px 14px;
      border-radius:8px;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 6px 14px rgba(43,154,120,0.18);
    }
    button[disabled]{opacity:0.5;cursor:not-allowed;box-shadow:none}
    button.secondary{
      background:transparent;color:var(--accent-2);border:1px solid #dff3ea;box-shadow:none;font-weight:600;
    }

    footer{
      padding:14px 22px;
      border-top:1px solid #eef6f2;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }

    /* ê²°ê³¼ í™”ë©´ */
    .result{
      padding:28px;
      text-align:center;
      width:100%;
    }
    .result h2{margin:8px 0 6px}
    .result p{color:var(--muted);margin:6px 0 12px}
    .try-again{margin-top:12px}

    /* í’ì„  & íŒ ì• ë‹ˆë©”ì´ì…˜ */
    .balloon-wrap{position:relative;height:180px;display:flex;align-items:center;justify-content:center;}
    .balloon{
      width:120px;height:160px;border-radius:70% 70% 60% 60%/60% 60% 40% 40%;
      background:linear-gradient(180deg,#ff6b8a,#ff2d55);
      position:relative;display:inline-block;
      transform-origin:50% 90%;
      transition:transform .18s ease;
      box-shadow:0 8px 24px rgba(255,45,85,0.18), inset -6px -10px 40px rgba(255,255,255,0.14);
    }
    .balloon::after{
      content:"";position:absolute;left:50%;bottom:-18px;width:2px;height:24px;background:#b14;
      transform:translateX(-50%);
    }
    .burst{
      position:absolute;inset:0;pointer-events:none;
      display:grid;place-items:center;
      opacity:0;transition:opacity .3s ease;
    }
    .burst.active{opacity:1}
    .confetti{
      position:absolute;opacity:0;animation:confetti 900ms ease-out forwards;
      width:10px;height:18px;border-radius:2px;
    }
    @keyframes confetti{
      0%{transform:translateY(0) rotate(0);opacity:1}
      100%{transform:translateY(-220px) translateX(var(--tx)) rotate(var(--rot));opacity:0}
    }
    .pop{
      transform:scale(0);
      transition:transform .25s ease;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width:720px){
      main{padding:18px}
      .card-right{width:100%}
      header,footer{padding:12px}
    }

  </style>
</head>
<body>
  <div class="wrap" role="application" aria-labelledby="title">
    <header>
      <div>
        <h1 id="title">ì—ì½” í€´ì¦ˆ â€” í™˜ê²½ ìƒì‹ (ê³ ë“±í•™ìƒ ìˆ˜ì¤€)</h1>
        <div style="font-size:13px;color:var(--muted)">ì´ 10ë¬¸ì œ â€¢ í•˜ë‚˜ì”© í’€ì–´ìš”</div>
      </div>
      <div class="meta">
        <div id="qCount">ë¬¸ì œ 1 / 10</div>
        <div id="progText" style="font-size:12px;color:var(--muted)">ëª©í‘œ: 8ê°œ ì´ìƒ ë§íˆë©´ í’ì„  íŒ!</div>
      </div>
    </header>

    <div class="progress" aria-hidden="true"><i id="progressBar"></i></div>

    <main>
      <div class="card-left">
        <div class="qbox" id="qbox" aria-live="polite">
          <div class="qnum" id="qnum">Q1</div>
          <div class="question" id="question">ì—¬ê¸°ì— ì§ˆë¬¸ì´ í‘œì‹œë©ë‹ˆë‹¤.</div>

          <div class="choices" id="choices" role="list"></div>

          <div class="hint" id="hint" aria-hidden="true"></div>
        </div>
      </div>

      <aside class="card-right">
        <div class="scorecard" aria-hidden="false">
          <div class="small">í˜„ì¬ ì ìˆ˜</div>
          <div class="score" id="score">0 / 10</div>
          <div class="small">ì •ë‹µë¥ : <span id="percent">0%</span></div>

          <div class="controls" style="margin-top:12px">
            <button id="nextBtn" disabled>ë‹¤ìŒ</button>
            <button id="skipBtn" class="secondary">ê±´ë„ˆë›°ê¸°</button>
          </div>

          <div style="margin-top:14px;font-size:13px;color:var(--muted)">
            <strong>íŒíŠ¸</strong>ëŠ” ê° ë¬¸ì œì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…(ì •ë‹µ ì œì¶œ í›„ ìë™ í‘œì‹œ).
          </div>
        </div>

        <div style="height:18px"></div>

        <div class="balloon-wrap" aria-hidden="true">
          <div class="balloon" id="balloon" title="ì¶•í•˜ í’ì„ "></div>
          <div class="burst" id="burst"></div>
        </div>
      </aside>
    </main>

    <footer>
      <div style="font-size:13px;color:var(--muted)">í™˜ê²½ì— ëŒ€í•œ ì´í•´ë¥¼ ë„“íˆëŠ” ì—°ìŠµì´ì—ìš” â€” í‹€ë ¤ë„ ê´œì°®ì•„ìš”.</div>
      <div>
        <button id="restart" class="secondary">ì²˜ìŒë¶€í„°</button>
      </div>
    </footer>

    <!-- ê²°ê³¼ ëª¨ë‹¬ì˜ì—­ (ê°„ë‹¨) -->
    <div id="resultScreen" class="result" style="display:none">
      <h2 id="resultTitle">ê²°ê³¼</h2>
      <p id="resultMsg">ì ìˆ˜ì™€ ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— ì˜µë‹ˆë‹¤.</p>
      <div id="finalScore" style="font-size:22px;font-weight:700"></div>
      <div style="margin-top:12px">
        <button id="replayBtn">ë‹¤ì‹œ í’€ê¸°</button>
        <button id="reviewBtn" class="secondary">ì˜¤ë‹µ í™•ì¸</button>
      </div>
    </div>

  </div>

  <script>
    // ì§ˆë¬¸ ë°ì´í„° (10ë¬¸ì œ, ê³ ë“±í•™ìƒ ìˆ˜ì¤€)
    const questions = [
      {
        q: "ì˜¨ì‹¤íš¨ê³¼ì˜ ì£¼ëœ ì›ì¸ ë¬¼ì§ˆ ì¤‘, ì§€êµ¬ì˜ í‰ê·  ê¸°ì˜¨ ìƒìŠ¹ì— ê°€ì¥ í° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€?",
        choices: ["ì´ì‚°í™”íƒ„ì†Œ(COâ‚‚)", "ì‚°ì†Œ(Oâ‚‚)", "ì§ˆì†Œ(Nâ‚‚)", "í—¬ë¥¨(He)"],
        answer: 0,
        hint: "í™”ì„ì—°ë£Œ ì—°ì†Œì™€ ì‚°ë¦¼ íŒŒê´´ë¡œ ë°©ì¶œë˜ëŠ” ì´ì‚°í™”íƒ„ì†ŒëŠ” ê°€ì¥ í° ê¸°ì—¬ë¥¼ í•©ë‹ˆë‹¤."
      },
      {
        q: "í•´ì–‘ì‚°ì„±í™”ê°€ ì‹¬í™”ë˜ë©´ í•´ì–‘ìƒë¬¼ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ìœ¼ë¡œ ì˜³ì§€ ì•Šì€ ê²ƒì€?",
        choices: ["ì‚°í˜¸ì˜ ì„íšŒí™” ëŠ¥ë ¥ ê°ì†Œ", "ì¡°ê°œÂ·íŒ¨ë¥˜ì˜ ê»ì§ˆ ì•½í™”", "ì–´ë¥˜ì˜ ê´‘í•©ì„± ì¦ê°€", "í”Œë‘í¬í†¤ ì„œì‹ì§€ ë³€í™”"],
        answer: 2,
        hint: "ì–´ë¥˜ëŠ” ê´‘í•©ì„±í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ 'ê´‘í•©ì„± ì¦ê°€'ëŠ” ì‚¬ì‹¤ì´ ì•„ë‹™ë‹ˆë‹¤."
      },
      {
        q: "ìƒë¬¼ë‹¤ì–‘ì„±(Biodiversity)ì´ ì¤‘ìš”í•œ ì´ìœ ë¡œ ì˜³ì€ ì„¤ëª…ì€?",
        choices: ["ìƒíƒœê³„ ì•ˆì •ì„±ê³¼ ìƒì‚°ì„± ìœ ì§€ì— ê¸°ì—¬í•œë‹¤","ìì› ì±„êµ´ì„ ì‰½ê²Œ í•´ì¤€ë‹¤","ì¢… ìˆ˜ê°€ ì ì„ìˆ˜ë¡ ì•ˆì •ì ì´ë‹¤","ì§ˆë³‘ ë°œìƒì„ ì´‰ì§„í•œë‹¤"],
        answer: 0,
        hint: "ë‹¤ì–‘í•œ ì¢…ì´ ìˆì„ìˆ˜ë¡ ìƒíƒœê³„ì˜ íšŒë³µë ¥ê³¼ ê¸°ëŠ¥ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤."
      },
      {
        q: "ì¬í™œìš© ë¶„ë¥˜ì—ì„œ 'í”Œë¼ìŠ¤í‹±' ì¤‘ ì¬í™œìš© ì–´ë ¤ìš´ ëŒ€í‘œì  ìœ í˜•ì€ ë¬´ì—‡ì¸ê°€?",
        choices: ["ì¼ë°˜ PET(1ë²ˆ) ë³‘","í´ë¦¬í”„ë¡œí•„ë Œ(PP, 5ë²ˆ) ì‹í’ˆ ìš©ê¸°","í˜¼í•© ì†Œì¬ ë¹„ë‹(ì˜ˆ: ë¼ë¯¸ë„¤ì´íŠ¸)","HDPE(2ë²ˆ) ì„¸ì œ ìš©ê¸°"],
        answer: 2,
        hint: "ì—¬ëŸ¬ ì†Œì¬ê°€ í•©ì³ì§„ ë¼ë¯¸ë„¤ì´íŠ¸ë¥˜ëŠ” ë¶„ë¦¬Â·ì¬í™œìš©ì´ ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤."
      },
      {
        q: "ì§€ì† ê°€ëŠ¥í•œ ì—ë„ˆì§€ ì „í™˜ì„ ìœ„í•´ ì¤‘ìš”í•œ ì „ëµìœ¼ë¡œ ì•Œë§ì€ ê²ƒì€?",
        choices: ["í™”ë ¥ ë°œì „ ë¹„ì¤‘ ìœ ì§€", "ì¬ìƒì—ë„ˆì§€ ë³´ê¸‰ í™•ëŒ€ì™€ ì „ë ¥ ì €ì¥ê¸°ìˆ  ê°œë°œ", "ì„íƒ„ ì‚¬ìš© í™•ëŒ€", "ì—ë„ˆì§€ ì†Œë¹„ ì¦ê°€ ìœ ë„"],
        answer: 1,
        hint: "ì¬ìƒì—ë„ˆì§€ í™•ëŒ€ì™€ ë°°í„°ë¦¬Â·ê·¸ë¦¬ë“œ ê¸°ìˆ ì´ í•µì‹¬ì…ë‹ˆë‹¤."
      },
      {
        q: "ëŒ€ê¸° ì¤‘ ë¯¸ì„¸ë¨¼ì§€(PM2.5)ê°€ ê±´ê°•ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ìœ¼ë¡œ í‹€ë¦° ê²ƒì€?",
        choices: ["í˜¸í¡ê¸° ì§ˆí™˜ ì•…í™”","ì‹¬í˜ˆê´€ê³„ ì§ˆí™˜ ìœ„í—˜ ì¦ê°€","ì¥ê¸°ì ì¸ ë…¸ì¶œ ì‹œ í ê¸°ëŠ¥ ì €í•˜","ë¯¸ì„¸ë¨¼ì§€ëŠ” ë¹„í™œì„±ì´ë¼ ë¬´í•´í•˜ë‹¤"],
        answer: 3,
        hint: "ë¯¸ì„¸ë¨¼ì§€ëŠ” ë§¤ìš° í•´ë¡œìš°ë©° ì—¬ëŸ¬ ì§ˆí™˜ê³¼ ì—°ê´€ë©ë‹ˆë‹¤."
      },
      {
        q: "íƒ„ì†Œì¤‘ë¦½(ë„· ì œë¡œ)ì„ ë‹¬ì„±í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì ì ˆí•˜ì§€ ì•Šì€ ê²ƒì€?",
        choices: ["í™”ì„ì—°ë£Œ ì‚¬ìš© ê°ì†Œ","íƒ„ì†Œ í¬ì§‘Â·ì €ì¥ ê¸°ìˆ (CCS) ë„ì…","ì‚°ë¦¼ í¡ìˆ˜ì› ë³´í˜¸Â·ë³µì›","ì˜¨ì‹¤ê°€ìŠ¤ ë¬´ë‹¨ ë°°ì¶œ í™•ëŒ€"],
        answer: 3,
        hint: "ë„· ì œë¡œëŠ” ë°°ì¶œ ê°ì¶•ê³¼ í¡ìˆ˜ ì¦ëŒ€ë¥¼ í†µí•´ ë‹¬ì„±í•©ë‹ˆë‹¤. ë¬´ë‹¨ ë°°ì¶œ í™•ëŒ€ëŠ” ì •ë°˜ëŒ€ì…ë‹ˆë‹¤."
      },
      {
        q: "ìƒíƒœê³„ ì„œë¹„ìŠ¤ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ê²ƒì€?",
        choices: ["ìˆ˜ìì› ì •í™”","ì‹ëŸ‰ ì œê³µ","ë¬¸í™”Â·ë ˆí¬ë¦¬ì—ì´ì…˜ ì œê³µ","ì¸í„°ë„· ì†ë„ í–¥ìƒ"],
        answer: 3,
        hint: "ì¸í„°ë„· ì†ë„ëŠ” ìƒíƒœê³„ ì„œë¹„ìŠ¤ ë²”ì£¼ì— ì†í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
      },
      {
        q: "í”Œë¼ìŠ¤í‹±ì´ ìì—°ì—ì„œ ë¶„í•´ë˜ëŠ” ë° ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€?",
        choices: ["ê³ ë¶„ì êµ¬ì¡°ê°€ ë¯¸ìƒë¬¼ ë¶„í•´ì— ì €í•­í•˜ê¸° ë•Œë¬¸","ë¬¼ì´ ë¶€ì¡±í•´ì„œ","ê³µê¸° ì¤‘ ì‚°ì†Œê°€ ë„ˆë¬´ ë§ì•„ì„œ","ë¹›ì´ ì—†ì–´ì„œ"],
        answer: 0,
        hint: "í”Œë¼ìŠ¤í‹±ì˜ ê³ ë¶„ì ê²°í•©ì€ ë¯¸ìƒë¬¼ì´ ì‰½ê²Œ ë¶„í•´í•˜ì§€ ëª»í•˜ê²Œ í•©ë‹ˆë‹¤."
      },
      {
        q: "ì§€ì†ê°€ëŠ¥í•œ ì†Œë¹„(Sustainable consumption)ì˜ ì˜ˆë¡œ ì ì ˆí•œ ê²ƒì€?",
        choices: ["ë¶ˆí•„ìš”í•œ í¬ì¥ ì œí’ˆ êµ¬ë§¤","ìˆ˜ë¦¬ ê°€ëŠ¥í•œ ì œí’ˆ ì‚¬ìš©Â·ìˆ˜ë¦¬","í•œ ë²ˆ ì“°ê³  ë²„ë¦¬ëŠ” ì œí’ˆ ì„ í˜¸","ë‚­ë¹„ì  ì†Œë¹„ ì¥ë ¤"],
        answer: 1,
        hint: "ìˆ˜ë¦¬Â·ì¬ì‚¬ìš©ì„ ì¥ë ¤í•˜ë©´ ìì› ë‚­ë¹„ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
      }
    ];

    // ìƒíƒœ
    let current = 0;
    let score = 0;
    let userAnswers = Array(questions.length).fill(null);

    // DOM ì°¸ì¡°
    const qnumEl = document.getElementById('qnum');
    const questionEl = document.getElementById('question');
    const choicesEl = document.getElementById('choices');
    const nextBtn = document.getElementById('nextBtn');
    const skipBtn = document.getElementById('skipBtn');
    const scoreEl = document.getElementById('score');
    const percentEl = document.getElementById('percent');
    const qCountEl = document.getElementById('qCount');
    const progressBar = document.getElementById('progressBar');
    const hintEl = document.getElementById('hint');
    const balloon = document.getElementById('balloon');
    const burst = document.getElementById('burst');
    const resultScreen = document.getElementById('resultScreen');
    const resultTitle = document.getElementById('resultTitle');
    const resultMsg = document.getElementById('resultMsg');
    const finalScore = document.getElementById('finalScore');
    const restart = document.getElementById('restart');
    const replayBtn = document.getElementById('replayBtn');
    const reviewBtn = document.getElementById('reviewBtn');

    // ì´ˆê¸°í™”
    function renderQuestion() {
      const item = questions[current];
      qnumEl.textContent = 'Q' + (current + 1);
      questionEl.textContent = item.q;
      qCountEl.textContent = `ë¬¸ì œ ${current+1} / ${questions.length}`;
      progressBar.style.width = `${((current)/questions.length)*100}%`;
      hintEl.style.display = 'none';
      hintEl.textContent = '';

      // choices ë Œë”ë§
      choicesEl.innerHTML = '';
      item.choices.forEach((c, idx) => {
        const btn = document.createElement('button');
        btn.setAttribute('type','button');
        btn.className = 'choice';
        btn.setAttribute('role','listitem');
        btn.setAttribute('data-index', idx);
        btn.innerHTML = `<span class="label">${String.fromCharCode(65+idx)}. ${c}</span>`;
        btn.addEventListener('click', onSelect);
        btn.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); }
        });
        choicesEl.appendChild(btn);
      });

      // ë‹¤ìŒ ë²„íŠ¼ ë¹„í™œì„±í™”
      nextBtn.disabled = true;
    }

    function onSelect(e){
      // prevent double selection if answered
      if(userAnswers[current] !== null) return;
      const idx = Number(this.dataset.index);
      userAnswers[current] = idx;
      const correctIdx = questions[current].answer;

      // ì‹œê°ì  í‘œì‹œ
      Array.from(choicesEl.children).forEach((el) => {
        const i = Number(el.dataset.index);
        if(i === correctIdx){ el.classList.add('correct') }
        if(i === idx && i !== correctIdx){ el.classList.add('wrong') }
        el.setAttribute('aria-disabled','true');
      });

      // ì±„ì 
      if(idx === correctIdx){ score++; }
      scoreEl.textContent = `${score} / ${questions.length}`;
      const pct = Math.round((score / questions.length) * 100);
      percentEl.textContent = pct + '%';

      // íŒíŠ¸(ì„¤ëª…) í‘œì‹œ
      hintEl.textContent = questions[current].hint || '';
      hintEl.style.display = 'block';

      // ë‹¤ìŒ í™œì„±í™” (ë§ˆì§€ë§‰ì´ë©´ ì™„ë£Œ ì²˜ë¦¬)
      nextBtn.disabled = false;
      if(current === questions.length - 1){
        nextBtn.textContent = 'ê²°ê³¼ ë³´ê¸°';
      } else {
        nextBtn.textContent = 'ë‹¤ìŒ';
      }
    }

    // ê±´ë„ˆë›°ê¸° (ì˜¤ë‹µ ì²˜ë¦¬ë¡œ ê°„ì£¼: null ìœ ì§€)
    skipBtn.addEventListener('click', () => {
      if(userAnswers[current] !== null) {
        // ì´ë¯¸ ë‹µí•œ ìƒíƒœë¼ë©´ ë‹¤ìŒìœ¼ë¡œ
        goNext();
        return;
      }
      // í‘œì‹œ: ì •ë‹µë§Œ í‘œì‹œ
      const correctIdx = questions[current].answer;
      Array.from(choicesEl.children).forEach((el) => {
        const i = Number(el.dataset.index);
        if(i === correctIdx) el.classList.add('correct');
        el.setAttribute('aria-disabled','true');
      });
      hintEl.textContent = questions[current].hint || '';
      hintEl.style.display = 'block';
      nextBtn.disabled = false;
      nextBtn.textContent = (current === questions.length - 1) ? 'ê²°ê³¼ ë³´ê¸°' : 'ë‹¤ìŒ';
    });

    nextBtn.addEventListener('click', () => {
      // ë§Œì•½ ë§ˆì§€ë§‰ ë¬¸ì œë¼ë©´ ê²°ê³¼ í‘œì‹œ
      if(current === questions.length - 1){
        showResult();
        return;
      }
      goNext();
    });

    function goNext(){
      current++;
      renderQuestion();
    }

    function showResult(){
      // progress ë°” ì „ë¶€ ì±„ìš°ê¸°
      progressBar.style.width = `100%`;
      // ê²°ê³¼ ë ˆì´ì•„ì›ƒ
      const correctCount = score;
      resultScreen.style.display = 'block';
      resultTitle.textContent = (correctCount >= 8) ? 'ì¶•í•˜í•©ë‹ˆë‹¤!' : 'ìˆ˜ê³ í–ˆì–´ìš”';
      resultMsg.textContent = (correctCount >= 8) ? 'í›Œë¥­í•´ìš” â€” ëª©í‘œ ë‹¬ì„±! í’ì„ ì„ í„°ëœ¨ë ¤ ì¶•í•˜í• ê²Œìš” ğŸ‰' : 'ë‹¤ìŒë²ˆì—” ë” ë§ì´ ë§ì¶œ ìˆ˜ ìˆì–´ìš”. í‹€ë¦° ë¬¸ì œëŠ” ë³µìŠµí•´ë´ìš”.';
      finalScore.textContent = `ì •ë‹µ ${correctCount} / ${questions.length} (${Math.round((correctCount/questions.length)*100)}%)`;

      // í’ì„  íŒ ì¡°ê±´
      if(correctCount >= 8){
        triggerBalloonPop();
      } else {
        // ë§Œì•½ ëª» ë¯¸ì¹˜ë©´ í’ì„ ì€ ë‚´ë ¤ë†“ê¸°(ì•ˆ ë³´ì´ê²Œ)
        balloon.style.opacity = '0.15';
        burst.classList.remove('active');
      }

      // ê°„ë‹¨í•œ ê²°ê³¼ ì•„ë˜ì— "ì˜¤ë‹µ í™•ì¸" ê¸°ëŠ¥ì„ ìœ„í•´ reviewBtn í™œì„±í™”
      reviewBtn.onclick = () => reviewAnswers();
      replayBtn.onclick = resetAll;
    }

    // í’ì„  íŒ ì• ë‹ˆë©”ì´ì…˜ êµ¬í˜„
    function triggerBalloonPop(){
      // ì¬ìƒ ì¤‘ì´ë©´ ì´ˆê¸°í™”
      burst.innerHTML = '';
      balloon.style.transform = 'scale(1)';
      balloon.style.opacity = '1';

      // ì•½ê°„ í”ë“¤ë¦¬ê²Œ
      balloon.animate([
        { transform: 'translateY(0) rotate(0deg)' },
        { transform: 'translateY(-6px) rotate(-4deg)' },
        { transform: 'translateY(0) rotate(4deg)' },
        { transform: 'translateY(-4px) rotate(-2deg)' },
      ], { duration: 800, iterations: 2 });

      // 700ms í›„ íŒ
      setTimeout(() => {
        // balloon ìˆ¨ê¸°ê¸°
        balloon.classList.add('pop');

        // confetti ìƒì„±
        const colors = ['#ff6b8a','#ffd166','#6be7c5','#6b9bff','#ff9f6b'];
        const confettiCount = 26;
        for(let i=0;i<confettiCount;i++){
          const el = document.createElement('div');
          el.className = 'confetti';
          el.style.left = '50%';
          el.style.bottom = '30px';
          const tx = (Math.random()*400 - 200).toFixed(0) + 'px';
          const rot = (Math.random()*720 - 360).toFixed(0) + 'deg';
          el.style.setProperty('--tx', tx);
          el.style.setProperty('--rot', rot);
          el.style.background = colors[i % colors.length];
          el.style.transform = `translateX(-50%)`;
          el.style.opacity = '0';
          el.style.animationDelay = (Math.random()*120) + 'ms';
          burst.appendChild(el);
        }
        burst.classList.add('active');

        // confetti ì œê±° (3.5s í›„)
        setTimeout(() => {
          burst.classList.remove('active');
          burst.innerHTML = '';
          balloon.classList.remove('pop');
          balloon.style.opacity = '0.18';
        }, 3500);
      }, 700);
    }

    // ì˜¤ë‹µ í™•ì¸: ê°„ë‹¨í•œ ëª©ë¡ì„ alertë¡œ í‘œì‹œ (ë” ë‚˜ì€ UIëŠ” í•„ìš”í•˜ë©´ ì¶”ê°€)
    function reviewAnswers(){
      let text = 'ë¬¸ì œë³„ ì •ë‹µ í™•ì¸:\\n\\n';
      questions.forEach((q, i) => {
        const u = userAnswers[i];
        const userStr = (u === null) ? 'ì‘ë‹µ ì—†ìŒ' : `${String.fromCharCode(65+u)}. ${q.choices[u]}`;
        const correctStr = `${String.fromCharCode(65+q.answer)}. ${q.choices[q.answer]}`;
        text += `Q${i+1}. ${q.q}\\nì •ë‹µ: ${correctStr}\\në‚´ ë‹µ: ${userStr}\\n\\n`;
      });
      // ë¸Œë¼ìš°ì € alertë¡œ ê°„ë‹¨ í‘œì‹œ (ì›í•˜ë©´ ëª¨ë‹¬ë¡œë„ ë³€ê²½ ê°€ëŠ¥)
      const w = window.open('', '_blank', 'width=600,height=600,scrollbars=yes');
      w.document.write('<pre style="white-space:pre-wrap;font-family:inherit;padding:18px;">' + text.replace(/</g,'&lt;') + '</pre>');
    }

    // ë¦¬ì…‹
    function resetAll(){
      current = 0;
      score = 0;
      userAnswers = Array(questions.length).fill(null);
      resultScreen.style.display = 'none';
      balloon.style.opacity = '1';
      burst.innerHTML = '';
      scoreEl.textContent = `0 / ${questions.length}`;
      percentEl.textContent = '0%';
      progressBar.style.width = '0%';
      renderQuestion();
    }

    // ì‹œì‘
    renderQuestion();

    // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜: Enterë¡œ ë‹¤ìŒ(ë‹¨, ì„ íƒ í›„)
    document.addEventListener('keydown', (e) => {
      if(e.key === 'ArrowRight'){
        if(!nextBtn.disabled) nextBtn.click();
      }
    });

    // ì²˜ìŒë¶€í„° ë²„íŠ¼
    restart.addEventListener('click', () => {
      if(confirm('ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í• ê¹Œìš”? ì§„í–‰ ì¤‘ì¸ ë‹µì•ˆì€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.')) resetAll();
    });

    // í˜ì´ì§€ê°€ ê²°ê³¼ ëª¨ë“œì¸ì§€ í‘œì‹œ (ê°„ë‹¨ ë°©ì‹: append result screen below)
    // ê²°ê³¼ í™”ë©´ì„ ìë™ìœ¼ë¡œ main ì•„ë˜ì— í‘œì‹œ
    // showResult()ì—ì„œ í‘œì‹œí•¨.

  </script>
</body>
</html>
